//
//  MarketDataModel.swift
//  CryptoCoins
//
//  Created by Nalin iOS Developer on 20/06/21.
//

import Foundation

/*
 {
   "data": {
     "active_cryptocurrencies": 8018,
     "upcoming_icos": 0,
     "ongoing_icos": 50,
     "ended_icos": 3375,
     "markets": 623,
     "total_market_cap": {
       "btc": 43064513.943553425,
       "eth": 697222088.7662667,
       "ltc": 9908211833.056198,
       "bch": 2727712536.131068,
       "bnb": 4562608246.5207205,
       "eos": 339586305290.2905,
       "xrp": 1973172057673.4084,
       "xlm": 5178986911720.151,
       "link": 73764905921.22363,
       "dot": 74386950411.05914,
       "yfi": 45462631.94428721,
       "usd": 1535912988915.8174,
       "aed": 5641561999586.685,
       "ars": 146474051659113.4,
       "aud": 2053908859905.6082,
       "bdt": 130189919708293.67,
       "bhd": 578927075173.0701,
       "bmd": 1535912988915.8174,
       "brl": 7818027500529.849,
       "cad": 1914300512865.116,
       "chf": 1417724484418.7432,
       "clp": 1149785593934341.5,
       "cny": 9911400108772.643,
       "czk": 33118891779991.77,
       "dkk": 9627724659284.87,
       "eur": 1294561157750.573,
       "gbp": 1112053225016.6763,
       "hkd": 11922509217329.143,
       "huf": 460733962937032.3,
       "idr": 22254611252895744,
       "ils": 5035275706342.068,
       "inr": 113878886241473.28,
       "jpy": 169249877257949.3,
       "krw": 1743645220666681,
       "kwd": 462801301820.11487,
       "lkr": 305312569962203.94,
       "mmk": 2528527325742969,
       "mxn": 31754309884989.51,
       "myr": 6358679774111.479,
       "ngn": 629724325455487,
       "nok": 13321126944165.773,
       "nzd": 2214566894459.195,
       "php": 74492942648549.66,
       "pkr": 240907952311445.8,
       "pln": 5894066094964.431,
       "rub": 111813851227875.89,
       "sar": 5759722857649.978,
       "sek": 13222843872005.055,
       "sgd": 2065395953149.7104,
       "thb": 48283605803012.836,
       "try": 13426797757803.176,
       "twd": 42689933570420.664,
       "uah": 41772836852913.086,
       "vef": 153790967580.1409,
       "vnd": 35478942237326296,
       "zar": 22044360123843.055,
       "xdr": 1074905633466.7565,
       "xag": 59526903578.3836,
       "xau": 870494045.5979264,
       "bits": 43064513943553.42,
       "sats": 4306451394355342.5
     },
     "total_volume": {
       "btc": 2773403.321949789,
       "eth": 44901889.74745408,
       "ltc": 638100029.374506,
       "bch": 175667767.17707372,
       "bnb": 293837122.7001927,
       "eos": 21869741486.34811,
       "xrp": 127074508415.51009,
       "xlm": 333532604689.92914,
       "link": 4750543229.011876,
       "dot": 4790603596.505438,
       "yfi": 2927844.828903295,
       "usd": 98914530679.90837,
       "aed": 363322962640.37115,
       "ars": 9433094310162.096,
       "aud": 132274049638.89142,
       "bdt": 8384377826175.569,
       "bhd": 37283557305.58568,
       "bmd": 98914530679.90837,
       "brl": 503489798340.3357,
       "cad": 123283114458.21046,
       "chf": 91303057544.0893,
       "clp": 74047490468074.03,
       "cny": 638305357930.5155,
       "czk": 2132894025050.864,
       "dkk": 620036338686.5919,
       "eur": 83371200243.39815,
       "gbp": 71617483306.29688,
       "hkd": 767823055257.4818,
       "huf": 29671787426174.76,
       "idr": 1433222092286532.8,
       "ils": 324277440799.785,
       "inr": 7333928854184.195,
       "jpy": 10899883194828.385,
       "krw": 112292720954365.94,
       "kwd": 29804926384.470043,
       "lkr": 19662474232870.32,
       "mmk": 162840014728788.7,
       "mxn": 2045013410268.2996,
       "myr": 409506157014.8203,
       "ngn": 40554957578762.555,
       "nok": 857895616039.9131,
       "nzd": 142620608462.5407,
       "php": 4797429616275.274,
       "pkr": 15514744137143.617,
       "pln": 379584511484.14716,
       "rub": 7200938267685.054,
       "sar": 370932655314.6392,
       "sek": 851566075221.706,
       "sgd": 133013831413.84651,
       "thb": 3109518730556.4756,
       "try": 864700935750.6904,
       "twd": 2749279922982.712,
       "uah": 2690217858884.679,
       "vef": 9904311956.97923,
       "vnd": 2284883939227534,
       "zar": 1419681682181.76,
       "xdr": 69225136467.27249,
       "xag": 3833599802.056687,
       "xau": 56060799.40814472,
       "bits": 2773403321949.789,
       "sats": 277340332194978.88
     },
     "market_cap_percentage": {
       "btc": 43.51323232061026,
       "eth": 16.689697977165242,
       "usdt": 4.074460981511996,
       "bnb": 3.3870470397364545,
       "ada": 2.912054216644996,
       "doge": 2.4474506134149667,
       "xrp": 2.3417850861009826,
       "usdc": 1.5788372732484075,
       "dot": 1.3480305580180798,
       "bch": 0.6879532392430191
     },
     "market_cap_change_percentage_24h_usd": -1.187096271084059,
     "updated_at": 1624127905
   }
 }

 */
struct GlobalData: Codable {
    let data: MarketDataModel?
}

struct MarketDataModel: Codable {
    let totalMarketCap, totalVolume, marketCapPercentage: [String: Double]
    let marketCapChangePercentage24HUsd: Double
    
    enum CodingKeys: String, CodingKey {
        case totalMarketCap = "total_market_cap"
        case totalVolume = "total_volume"
        case marketCapPercentage = "market_cap_percentage"
        case marketCapChangePercentage24HUsd = "market_cap_change_percentage_24h_usd"
    }
    
    var marketCap: String {
        if let item = totalMarketCap.first(where: { $0.key == "usd" }) {
            return "₹" + item.value.formattedWithAbbreviations()
        }
        return ""
    }
    
    var volume: String {
        if let item = totalVolume.first(where: { $0.key == "usd" }) {
            return "₹" + item.value.formattedWithAbbreviations()
        }
        return ""
    }
    
    var btcDominance: String {
        if let item = marketCapPercentage.first(where: { $0.key == "btc" }) {
            return item.value.asPercentSring()
        }
        return ""
    }
    
}


